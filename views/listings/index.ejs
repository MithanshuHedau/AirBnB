<% layout("/layouts/boilerplate") %>

<body class="relative min-h-screen bg-black bg-fixed bg-center bg-cover font-sans text-white">

  <!-- Overlay for blurred background -->
  <div class="absolute inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-0"></div>

  <!-- Main content -->
  <div class="relative z-10 container mx-auto px-4 py-12">

    <% if (success && success.length > 0) { %>
      <div id="flashji" class="z-20 relative mx-auto mb-6 w-fit px-6 py-3 rounded-xl bg-green-500 bg-opacity-90 text-white text-center font-semibold shadow-lg animate-fadeIn">
        ‚úÖ <%= success[0] %>
      </div>
    <% } %> 
     <% if (error && error.length > 0) { %>
      <div id="flashji" class="z-20 relative mx-auto mb-6 w-fit px-6 py-3 rounded-xl bg-red-500 bg-opacity-90 text-white text-center font-semibold shadow-lg animate-fadeIn">
        ‚ö†Ô∏è <%= error[0] %>
      </div>
    <% } %> 


    <!-- Listings Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
      <% for (let listing of allListings) { %>
        <div style="border: 0.5px solid rgb(163, 160, 160); border-radius: 10px;" 
             class="bg-zinc-900 bg-opacity-80 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition duration-300">

          <!-- Image -->
          <a href="/listings/<%= listing._id %>">
            <img
              src="<%= listing.image.url %>"
              alt="<%= listing.title %>"
              class="w-full h-48 object-cover hover:scale-105 transition duration-300"
            />
          </a>


          <!-- Content -->
          <div class="p-4">
            <a href="/listings/<%= listing._id %>" class="block text-xl font-bold text-white hover:text-orange-400 truncate">
              <%= listing.title %>
            </a>
            <p class="text-gray-300 text-sm mt-1 mb-3 line-clamp-2">
              <%= listing.description %>
            </p>
            <p class="text-orange-400 font-semibold mb-1">‚Çπ <%= listing.price.toLocaleString("en-IN") %></p>
            <p class="text-gray-400 text-sm">üìç <%= listing.location %>, <%= listing.country %></p>
          </div>

        </div>
      <% } %>
    </div>
  </div>

  <script>
    const flash = document.getElementById('flashji');
    setTimeout(() => {
      if (flash) {
        flash.style.display = 'none';
      }
    }, 2000);
  </script>
</body>
